# 锁

- 锁是计算机协调多个进程或线程并发访问某一资源的机制。

- 这里的资源除计算机传统资源(CPU, RAM, I/O)的争用以外，**数据**也是一种供许多用户共享的资源。

- 保证数据并发访问的一致性、有效性是数据库必须解决的问题，锁冲突也是影响数据库并发访问性能的一个重要因素。

## Mysql数据锁的分类(按粒度划分)

 1. 全局锁: 锁定数据库中的所有表

 2. 表级锁：每次操作锁住整张表

 3. 行级锁：每次操作锁住对应的行数据

## 全局锁

- 对整个数据库实例加锁，加锁后真个实例就处于只读状态，后续的DML的写语句，DDL语句，已经更新操作事务提交语句都将被阻塞。

- 典型的实例场景：做全库的逻辑**备份**，对所有的表进行锁定，从而获取一致性视图，保证数据的完整性。

## 表级锁

每次操作锁住整张表。

锁定粒度大，发生锁冲突的概率最高，并发度最低。

应用在MyISAM、InnoDB、BDB等存储引擎中。

## 行级锁

每次锁住对应的行数据

锁定粒度最小，发生锁冲突的概率最低，并发度最高。

应用在InnoDB存储引擎中。
