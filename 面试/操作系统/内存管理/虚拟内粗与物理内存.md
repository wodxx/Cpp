# 虚拟内存与物理内存

操作系统有虚拟内存与物理内存的概念。

1.**物理内存** 以前，还没有虚拟内存概念的时候，程序寻址用的都是物理地址。程序能寻址的范围是有限的，这取决于 CPU 的地址线条数。比如在 32 位平台下，寻址的范围是 2^32 也就是 4G。并且这是固定的，如果没有虚拟内存，且每次开启一个进程都给 4G 物理内存，就可能会出现很多问题：

- 因为物理内存是有限的，当有多个进程要执行的时候，都要给 4G 内存，很显然内存不够，这很快就分配完了，于是没有得到分配资源的进程就只能等待。当一个进程执行完了以后，再将等待的进程装入内存。这种频繁的装入内存的操作效率很低(物理内存不够用)

- 由于指令都是直接访问物理内存的，那么任何进程都可以修改其他进程的数据，甚至会修改内核地址空间的数据，这是不安全的(隔离性差)

2.**虚拟内存** 由于物理内存有很多问题，所以出现了虚拟内存。虚拟内存是计算机系统内存管理的一种技术。**它使得应用程序认为它拥有连续的可用的内存**（一个连续完整的地址空间），而实际上，它通常是被分隔成多个物理内存碎片，还有部分暂时存储在外部磁盘存储器上，在需要时进行数据交换。

小结：

1、直接使用物理内存的缺陷：隔离性差，物理内存不够用；

2、虚拟内存；每个进程都可以自己搞一份(物理内存碎片)，在需要的时候映射到物理内存，变相扩大了物理内存；同时隔离性也比较好。
