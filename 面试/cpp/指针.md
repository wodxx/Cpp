# 指针

## 悬空指针、野指针和避免方法

## 智能指针

智能指针是为了解决动态内存分配时带来的内存泄漏(c++没有自动内存回收机制)以及多次释放同一块内存空间而提出来的。C++11封装在了< memory >头文件中。

c++11中智能指针包括以下三种：

1. **共享指针(shared_ptr):** 资源可以被多个指针共享，使用计数机制表明资源被几个指针共享过。当计数减为0时，会自动释放内存空间，避免内存泄漏。

2. **独占指针(unique_ptr):** 独享所有权的智能指针，资源智能被一个指针占有，该指针不能拷贝构造和赋值。

3. **弱指针(weak_ptr):** 指向shared_ptr指向的对象，能够解决由shared_ptr带来的循环引用问题。

>智能指针的实现原理：计数原理。
>智能指针会遇到的**最大问题**是循环引用，就像是类之间的循环引用一样，两个指针互相引用对方就会造成都无法析构的现象。循环引用的现象可以通过让引用链上的一方持用普通指针或弱智能指针 (weak_ptr) 来解决.

## 智能指针原理

智能指针本身是一个临时变量，实际就是在**构造和析构函数中对new和delete做了封装**。
