# const 和 define 的区别

const 在 C 语言中表示只读，编译器禁止对它修饰的变量进行修改，在 C++ 中增加了常量的语义。

而 define 用于定义宏，在预编译阶段进行宏展开，进行替换.

## 它们的区别有

 1. const 生效于编译阶段，而 define 生效于预处理阶段；

 2. define只是简单的字符串替换，没有类型检查，而 const 有对应的数据类型，编译器要进行判断的，可以避免一些低级的错误；

 3. 用 define 定义的常量是不可以用指针变量去指向的，用 const 定义的常量是可以用指针去指向该常量的地址的；

 4. define 不分配内存，给出的是立即数，有多少次使用就进行多少次替换，在内存中会有多个拷贝，消耗内存大，const 在静态存储区中分配空间，在程序运行过程中内存中只有一个拷贝；

 5. 可以对 const 常量进行调试，但是不能对宏常量进行调试。

## const的用法

1. 用在变量身上，表示该变量只读，不能对它的值进行修改

```C
const int a = 10; a = 20; // 编译会报错，因为 a 只读，不能对它进行修改
```

2.结合指针一起使用

```C
const int * p; // 常量指针

int * const p; // 指针常量

const int * p 是常量指针，表示指针变量 p 所指向的内容不能修改，指针变量 p 的内容可以修改；

int * const p 是指针常量，表示指针变量 p 的内容不能修改，指针变量 p 所指向的内容可以修改；

const int * const p 表示指针变量 p 的内容和所指向的内容都不可以修改。
```

3.const 用于函数参数

 void foo(const int * p); void foo(const int & p); **const 用于形参时说明形参在函数内部不能被改变**；

4.在类中修饰成员方法，防止在方法中修改非 static 成员，const 修饰的成员方法中不能修改非静态成员变量

5.const 修饰类的成员变量，如果 const 修饰的是非静态的成员变量，可以在构造函数中对该变量进行初始化；如果 const 修饰的是静态的成员变量，则需要在类外对该变量进行初始化。
